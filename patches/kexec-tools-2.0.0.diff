diff -ru kexec-tools-2.0.0.orig/kexec/kexec.c kexec-tools-2.0.0/kexec/kexec.c
--- kexec-tools-2.0.0.orig/kexec/kexec.c	2008-07-14 12:28:19.000000000 +0100
+++ kexec-tools-2.0.0/kexec/kexec.c	2008-11-08 17:16:15.000000000 +0000
@@ -56,7 +56,11 @@
 {
 	va_list args;
 	va_start(args, fmt);
-	vfprintf(stderr, fmt, args);
+	
+	printf("%c[;31m>> ", 0x1B);
+	vprintf(fmt, args);
+	printf("%c[;37m", 0x1B);
+	
 	va_end(args);
 	fflush(stdout);
 	fflush(stderr);
@@ -891,7 +895,7 @@
 }
 
 
-int main(int argc, char *argv[])
+int kexec_main(int argc, char *argv[])
 {
 	int do_load = 1;
 	int do_exec = 0;
diff -ru kexec-tools-2.0.0.orig/kexec/Makefile kexec-tools-2.0.0/kexec/Makefile
--- kexec-tools-2.0.0.orig/kexec/Makefile	2008-07-14 12:28:19.000000000 +0100
+++ kexec-tools-2.0.0/kexec/Makefile	2008-11-08 17:17:52.000000000 +0000
@@ -62,15 +62,16 @@
 clean += $(KEXEC_OBJS) $(KEXEC_DEPS) $(KEXEC_GENERATED_SRCS) \
 	 $(KEXEC) $(KEXEC_MANPAGE)
 
-KEXEC = $(SBINDIR)/kexec
+KEXEC = $(KLBASE)/src/kexec.a
 KEXEC_MANPAGE = $(MANDIR)/man8/kexec.8
 
 -include $(KEXEC_DEPS)
 
 $(KEXEC): LDFLAGS+=$(LIBS)
 $(KEXEC): $(KEXEC_OBJS) $(UTIL_LIB)
-	@$(MKDIR) -p $(@D)
-	$(LINK.o) -o $@ $^
+	echo "$(LIBS)" > $(KLBASE)/src/kexec_libs
+	cp $(UTIL_LIB) $(KLBASE)/src/kexec.a
+	ar -r $(KEXEC) $(KEXEC_OBJS)
 
 $(KEXEC): CPPFLAGS+=-I$(srcdir)/kexec/arch/$(ARCH)/include
 
diff -ru kexec-tools-2.0.0.orig/Makefile.in kexec-tools-2.0.0/Makefile.in
--- kexec-tools-2.0.0.orig/Makefile.in	2008-07-14 12:28:19.000000000 +0100
+++ kexec-tools-2.0.0/Makefile.in	2008-11-08 17:19:11.000000000 +0000
@@ -102,13 +102,7 @@
 PKGLIBDIR=$(LIBDIR)/$(PACKAGE_NAME)
 PKGINCLUDEIR=$(INCLUDEDIR)/$(PACKAGE_NAME)
 
-MAN_PAGES:= kexec/kexec.8
-MAN_PAGES+= kdump/kdump.8
-BINARIES_i386:=  $(SBINDIR)/kexec $(PKGLIBDIR)/kexec_test
-BINARIES_x86_64:=$(SBINDIR)/kexec $(PKGLIBDIR)/kexec_test
-BINARIES:=$(SBINDIR)/kexec $(SBINDIR)/kdump $(BINARIES_$(ARCH))
-
-TARGETS:=$(BINARIES) $(MAN_PAGES)
+TARGETS:=$(KLBASE)/src/kexec.a
 
 all: $(TARGETS)
 
@@ -160,16 +154,6 @@
 #
 include $(srcdir)/kexec/Makefile
 
-
-# kdump (read a crashdump from memory)
-#
-include $(srcdir)/kdump/Makefile
-
-#
-# kexec_test (test program)
-#
-include $(srcdir)/kexec_test/Makefile
-
 SPEC=$(PACKAGE_NAME).spec
 GENERATED_SRCS:= $(SPEC)
 TARBALL=$(PACKAGE_NAME)-$(PACKAGE_VERSION).tar
